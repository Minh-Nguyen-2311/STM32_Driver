/*
 * Nextion_LCD.c
 *
 *  Created on: Jul 28, 2025
 *      Author: Admin
 */

#include "Nextion_LCD.h"
#include "usart.h"

uint8_t cmd_end[3] = {0xFF,0xFF,0xFF};

void Send2Gauge(char *obj, uint16_t value)
{
	char buf[30];
	value += 321;
	if(value >= 360) value -= 360;
	int len = sprintf(buf, "%s.val=%u", obj, value);
	HAL_UART_Transmit(&huart4, (uint8_t*)buf, len, HAL_MAX_DELAY);
	HAL_UART_Transmit(&huart4, cmd_end, 3, 1000);
}

void Send2Num(char *obj, uint16_t value)
{
	char buf[30];
	int len = sprintf(buf, "%s.val=%u", obj, value);
	HAL_UART_Transmit(&huart4, (uint8_t*)buf, len, HAL_MAX_DELAY);
	HAL_UART_Transmit(&huart4, cmd_end, 3, 1000);
}

void Send2Pic(char *obj, uint8_t index)
{
	char buf[30];
	int len = sprintf(buf, "%s.pic=%u", obj, index);
	HAL_UART_Transmit(&huart4, (uint8_t*)buf, len, HAL_MAX_DELAY);
	HAL_UART_Transmit(&huart4, cmd_end, 3, 1000);
}
